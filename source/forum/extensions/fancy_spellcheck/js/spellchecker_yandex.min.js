function $(a,b,c){a=document.createElement(a);var d;if(b)for(d in b)a[d]=b[d];if(c)for(d in c)a.style[d]=c[d];return a}
var ajax={createRequest:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Msxml2.XMLHTTP");return null},sendQuery:function(a){var b=this.createRequest();if(!b)return null;b.onreadystatechange=function(){if(b.readyState==4)b.status==200?a.callback(b):a.callback(null,{type:"HttpError",message:b.status+" ("+b.statusText+")",url:a.url})};var c="",d;for(d in a.args){var e=a.args[d];e instanceof Array||(e=[e]);for(var f=0;f<e.length;++f){if(c!=
"")c+="&";c+=d+"="+encodeURIComponent(e[f])}}d=a.url;if(a.method=="GET"){d+="?"+c;c=null}b.open(a.method,d,true);a.method=="POST"&&b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");b.send(c);return b}},json={TIMEOUT:7E3,id:0,r:{},sendQuery:function(a){var b=this.id++;this.r[b]=a;var c="_id="+b,d;for(d in a.args){var e=a.args[d];e instanceof Array||(e=[e]);for(var f=0;f<e.length;++f)c+="&"+d+"="+encodeURIComponent(e[f])}c=a.url+"?"+c;a=document.getElementsByTagName("BODY")[0];
c=$("SCRIPT",{type:"text/javascript",src:c,charset:"utf-8"});this.r[b].timer=window.setTimeout(function(){json.timeout(b)},json.TIMEOUT);a.appendChild(c)},response:function(a,b){var c=this.r[a];if(c){delete this.r[a];window.clearTimeout(c.timer);c.callback(b)}},timeout:function(a){var b=this.r[a];if(b){delete this.r[a];b.callback(null,{type:"TimeoutError",message:"Timeout expired",url:b.url})}}},util={attachEvent:function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent&&
a.attachEvent("on"+b,c)},detachEvent:function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else a.attachEvent&&a.detachEvent("on"+b,c)},selectItem:function(a,b){a.selectedIndex=-1;for(var c=a.options,d=0;d<c.length;++d)if(c[d].value==b){a.selectedIndex=d;return true}return false},extend:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.superCtor=b;a.superClass=b.prototype},_abc:["A-Z","a-z","\u0401-\u04e9"],isAlpha:function(a,b){for(var c=
a.charCodeAt(b||0),d=0;d<this._abc.length;++d){var e=this._abc[d],f=e.charCodeAt(0);e=e.charCodeAt(e.length-1);if(c>=f&&c<=e)return true}return false},htmlEncode:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},setCookies:function(a,b,c){var d,e="",f="";for(d in b){e+=f+d+"="+b[d];f="&"}b=new Date((new Date).getTime()+(c||100)*24*3600*1E3);document.cookie=a+"="+escape(e)+"; path=/; expires="+b.toUTCString()},
getCookies:function(a){for(var b=document.cookie.split("; "),c={},d=0;d<b.length;++d){var e=b[d].split("=");if(e[0]==a){a=unescape(e[1]).split("&");for(b=0;b<a.length;++b){d=a[b].split("=");c[d[0]]=unescape(d[1]||"")}break}}return c},modalDialog:function(a,b,c,d){var e=0,f=0;if(window.outerWidth){e=window.screenX+(window.outerWidth-b.width>>1);f=window.screenY+(window.outerHeight-b.height>>1)}if(window.showModalDialog&&navigator.userAgent.indexOf("Opera")<0){b="dialogWidth:"+b.width+"px;dialogHeight:"+
b.height+"px;scroll:no;help:no;status:no;";if(navigator.userAgent.indexOf("Firefox")>=0)b+="dialogLeft:"+e+"px;dialogTop:"+f+"px;";window.showModalDialog(a,c,b);d&&d()}else{var g=a.replace(/[\/\.]/g,"");b="width="+b.width+",height="+b.height+",toolbar=no,status=no,menubar=no,directories=no,resizable=no";if(e||f)b+=",left="+e+",top="+f;window.theDlgArgs=c;a=window.open(a,g,b);if(d)a.onunload=d}},localStorage:function(){try{if(window.localStorage)return window.localStorage;if(window.globalStorage)return window.globalStorage[document.domain];
return null}catch(a){return null}}},yandex={json:json};function SpellDic(a){this.items={};a&&this.load(a);this.dirty=false}SpellDic.prototype.add=function(a,b){this.items[SpellDic.norm(a)]=b||"";this.dirty=true};SpellDic.prototype.remove=function(a){delete this.items[SpellDic.norm(a)];this.dirty=true};SpellDic.prototype.check=function(a){return typeof this.items[SpellDic.norm(a)]!="undefined"};SpellDic.prototype.getChange=function(a){return this.items[SpellDic.norm(a)]};
SpellDic.prototype.clear=function(){this.items={};this.dirty=true};SpellDic.prototype.load=function(a){if(this.storage=util.localStorage()){this.name=a;this.setContent(String(this.storage[a]||""));this.dirty=false}};SpellDic.prototype.save=function(){if(this.storage){this.storage[this.name]=this.getContent();this.dirty=false}};SpellDic.prototype.isDirty=function(){return this.dirty};
SpellDic.prototype.setContent=function(a){this.items={};a=a.split("\n");for(var b=0;b<a.length;++b){var c=SpellDic.norm(a[b]);if(c)this.items[c]=""}this.dirty=true};SpellDic.compare=function(a,b){if(a==b)return 0;return a.toLowerCase()+" "+a<b.toLowerCase()+" "+b?-1:1};SpellDic.prototype.getContent=function(){var a=[],b;for(b in this.items)a.push(b);return a.sort(SpellDic.compare).join("\n")};SpellDic.norm=function(a){return a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")};
function SpellDialog(){}
SpellDialog.prototype.init=function(){var a={ctrls:[]};if(window.dialogArguments)a=window.dialogArguments;else if(window.opener&&window.opener.theDlgArgs)a=window.opener.theDlgArgs;else return;window.oncontextmenu=function(){return false};this.form=document.forms.form;this.form.onsubmit=function(){return false};this.form.word.origValue="";this.optionEmpty=this.form.suggest.options[0];this.fragment=document.getElementById("fragment");this.reason=document.getElementById("reason");this.errMessages=this.getStr("spellErrors").split(":");
this.speller=new Speller(this,a);this.session=this.speller.session;this.speller.startCheck();var b=this;this.form.word.onkeyup=this.form.word.onmousedown=function(){b.updateUI()};this.form.ignoreOnce.onclick=function(){b.session.ignore(false)};this.form.ignoreAll.onclick=function(){b.session.ignore(true)};this.form.change.onclick=function(){b.doChange(0)};this.form.changeAll.onclick=function(){b.doChange(1)};if(this.speller.userDic){this.form.addToDic.style.visibility="visible";this.form.addToDic.onclick=
function(){b.session.addToDic()}}this.form.cancel.onclick=function(){b.close()};this.form.suggest.ondblclick=function(){b.doChange(2)};this.form.undo.onclick=function(){b.session.undo()};this.form.options.onclick=function(){b.speller.optionsDialog()};this.form.langList.onchange=function(){var c=b.form.langList;b.speller.setLang(c.options[c.selectedIndex].value)}};SpellDialog.prototype.close=function(){window.close()};
SpellDialog.prototype.enable=function(a){for(var b=0;b<this.form.elements.length;++b){var c=this.form.elements[b];if(c.name!="cancel")c.disabled=!a}this.updateUI()};
SpellDialog.prototype.setError=function(a){var b=a.code<this.errMessages.length?a.code:0;this.form.word.value=a.word;this.form.word.origValue=a.word;this.fragment.innerHTML=this.session.textDoc.getHtmlFragment(a.r);this.reason.innerHTML=this.errMessages[b]+":";this.form.addToDic.disabled=a.code==Speller.REPEAT_WORD;this.form.undo.disabled=!this.session.canUndo();b=this.form.suggest;b.options.length=0;b.options.length=a.s.length;for(var c=0;c<a.s.length;++c)b.options[c].text=a.s[c];if(a.s.length>0)b.selectedIndex=
0;else b.options.add(this.optionEmpty);this.updateUI()};SpellDialog.prototype.clearError=function(){this.form.word.value="";this.fragment.innerHTML="";this.reason.innerHTML="";this.form.suggest.options.length=0};SpellDialog.prototype.setLang=function(a){return util.selectItem(this.form.langList,a)};
SpellDialog.prototype.doChange=function(a){var b=a==1,c=false,d=this.form.suggest,e="";if(d.selectedIndex>=0)e=d.options[d.selectedIndex].text;if(a!=2&&this.form.word.value!=this.form.word.origValue)e=this.form.word.value;for(a=0;a<d.options.length;++a)if(d.options[a].text==e)c=true;var f=this;if(c)this.session.change(b,e)||this.changeFailed(e);else this.session.checkWord(e,function(g){if(!g){g=f.getStr("wordNotFound").replace("{0}",e);if(!window.confirm(g))return}f.session.change(b,e)||f.changeFailed(e)})};
SpellDialog.prototype.updateUI=function(){var a=this.form.word,b=a.value==a.origValue&&!this.hasSuggest();this.form.change.disabled=b;this.form.changeAll.disabled=b;this.form.suggest.disabled=a.value!=a.origValue||!this.hasSuggest()};SpellDialog.prototype.changeFailed=function(a){alert(this.getStr("changeError").replace("{0}",a))};SpellDialog.prototype.hasSuggest=function(){var a=this.form.suggest;return a.options.length>=1&&a.options[0]!=this.optionEmpty};
SpellDialog.prototype.getStr=function(a){a=document.getElementById(a);if(!a)return"";return a.innerHTML};SpellDialog.prototype.stateChanged=function(a){this.enable(a)};SpellDialog.prototype.errorFound=function(){this.setError(this.session.getError())};SpellDialog.prototype.checkCompleted=function(){alert(this.getStr("checkComplete"));this.speller.endCheck()};
SpellDialog.prototype.onError=function(a){var b=a.message;switch(a.type){case "HttpError":b="HTTP error: "+b+"\nURL: "+a.url;break;case "TimeoutError":b=this.getStr("timeoutError")+"\nURL: "+a.url}alert(b)};function Speller(a,b){this.dialog=a;this.args=b;this.initParams();this.session=new SpellSession(a,b.ctrls);if(util.localStorage()){this.userDic=new SpellDic("yandex.userdic");this.session.setUserDic(this.userDic)}}Speller.URL="http://speller.yandex.net/services/spellservice.js";
Speller.MAX_TEXT_LEN=300;Speller.LATIN_OPTIONS=144;Speller.REPEAT_WORD=2;Speller.TOO_MANY_ERRORS=4;Speller.START=0;Speller.CONTINUE=1;function s(a){return typeof a=="undefined"?"":a.toString()}Speller.prototype.initParams=function(){var a=util.getCookies("yandex.spell");this.params={};this.params.lang=this.args.lang||a.lang||this.args.defLang;this.params.options=parseInt(s(this.args.options)||s(a.options)||s(this.args.defOptions));this.dialog.setLang(this.params.lang)};
Speller.prototype.startCheck=function(){this.doStart(Speller.START)};Speller.prototype.endCheck=function(){this.dialog.close()};Speller.prototype.doStart=function(a){this.session.setParams(this.params);this.session.start(a)};
Speller.prototype.optionsDialog=function(){var a=this,b={lang:this.params.lang,options:this.params.options,recheck:false,userDicDlg:this.args.userDicDlg};util.modalDialog("spellopt.html",this.args.optDlg,b,function(){var c=b.recheck?Speller.START:Speller.CONTINUE;if(a.setParams(b)||b.recheck)a.doStart(c)})};Speller.prototype.setLang=function(a){this.setParams({lang:a,options:this.params.options})&&this.doStart(Speller.CONTINUE)};
Speller.prototype.setParams=function(a){if(a.lang==this.params.lang&&a.options==this.params.options)return false;this.params.lang=a.lang;this.params.options=a.options;this.dialog.setLang(a.lang);this.saveParams();return true};Speller.prototype.saveParams=function(){this.args.lang=this.params.lang;this.args.options=this.params.options;util.setCookies("yandex.spell",this.params)};
function SpellSession(a,b){this.listener=a;this.url=Speller.URL;this.protocol=this.url.indexOf(".js")>0?"json":"xml";this.textDoc=new TextDoc(b);this.ignoreDic=new SpellDic;this.changeDic=new SpellDic;this.userDic=null;this.resetErrors();this.params={lang:"ru",options:0}}SpellSession.prototype.setParams=function(a){this.params.lang=a.lang;this.params.options=a.options};SpellSession.prototype.setUserDic=function(a){this.userDic=a};
SpellSession.prototype.start=function(a){var b=this;if(a==Speller.START){this.ignoreDic.clear();this.changeDic.clear();this.resetErrors()}else if(a=this.getError()){this.errors=this.errors.slice(0,this.errorIndex);this.docSel.endDoc=a.docIndex;this.docSel.endPos=a.pos}this.checkText(this.textDoc.getTexts(this.docSel),function(c){b.completeCheck(c)})};
SpellSession.prototype.completeCheck=function(a){this.listener.stateChanged(true);for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.length;++d){var e=c[d];if(b==0)e.pos+=this.docSel.startPos;e.docIndex=b+this.docSel.startDoc;if(e.code==Speller.TOO_MANY_ERRORS){this.docSel.endDoc=e.docIndex;this.docSel.endPos=e.pos;break}e.r={docIndex:e.docIndex,pos:e.pos,text:e.origWord};this.errors.push(e)}this.nextError(0)};
SpellSession.prototype.checkWord=function(a,b){var c=this;this.checkText([a],function(d){c.listener.stateChanged(true);b(d[0].length==0)})};SpellSession.prototype.ignore=function(a){var b=this.getError();if(b){if(a){var c=this.ignoreDic;b.undo=function(){c.remove(b.word)};this.ignoreDic.add(b.word)}this.nextError(1)}};
SpellSession.prototype.change=function(a,b){var c=this.getError();if(!this.changeText(c.r,b))return false;if(a){var d=this.changeDic;c.undo=function(){d.remove(c.word)};this.changeDic.add(c.word,b)}this.nextError(1);return true};SpellSession.prototype.addToDic=function(){var a=this.getError();if(!this.userDic||!a||a.code==Speller.REPEAT_WORD)return false;var b=this.userDic;b.add(a.word);b.save();a.undo=function(){b.remove(a.word);b.save()};this.nextError(1);return true};
SpellSession.prototype.undo=function(){for(;this.errorIndex>0;){var a=this.errors[this.errorIndex-1],b=a.word;if(b!=a.r.text)if(!this.changeText(a.r,b))return false;--this.errorIndex;if(a.undo){a.undo();a.undo=null}if(!(this.ignoreDic.check(b)||this.changeDic.check(b)))break}a=this.getError();this.textDoc.select(a.r);this.listener.errorFound()};SpellSession.prototype.canUndo=function(){return this.errorIndex>0};
SpellSession.prototype.getError=function(){if(this.errorIndex>=this.errors.length)return null;return this.errors[this.errorIndex]};
SpellSession.prototype.nextError=function(a){for(this.errorIndex+=a;this.errorIndex<this.errors.length;++this.errorIndex){a=this.errors[this.errorIndex];var b=a.code==Speller.REPEAT_WORD;if(!this.ignoreDic.check(a.word)){if(this.changeDic.check(a.word)){var c=this.changeDic.getChange(a.word);if(this.changeText(a.r,c))continue}if(!(!b&&this.userDic&&this.userDic.check(a.word))){this.textDoc.select(a.r);this.listener.errorFound();return}}}this.docSel.endDoc<this.textDoc.length?this.start(Speller.CONTINUE):
this.listener.checkCompleted()};SpellSession.prototype.resetErrors=function(){this.errors=[];this.errorIndex=0;this.docSel={startDoc:0,startPos:0,endDoc:0,endPos:0}};SpellSession.prototype.changeText=function(a,b){if(!this.textDoc.change(a,b))return false;this.updateRanges(a,b);return true};
SpellSession.prototype.updateRanges=function(a,b){for(var c=b.length-a.text.length,d=0;d<this.errors.length;++d){var e=this.errors[d].r;if(e.docIndex==a.docIndex){if(e.pos>a.pos)e.pos+=c;if(e.pos==a.pos)e.text=b}}if(this.docSel.endDoc==a.docIndex)this.docSel.endPos+=c};
SpellSession.prototype.parseResult=function(a){var b=[];a=a.getElementsByTagName("SpellResult");for(var c=0;c<a.length;++c){for(var d=[],e=a[c].getElementsByTagName("error"),f=0;f<e.length;++f){var g=e[f],i={code:parseInt(g.getAttribute("code")),pos:parseInt(g.getAttribute("pos")),len:parseInt(g.getAttribute("len")),word:g.getElementsByTagName("word")[0].firstChild.nodeValue};g=g.getElementsByTagName("s");for(var j=[],h=0;h<g.length;++h)j.push(g[h].firstChild.nodeValue);i.s=j;d.push(i)}b.push(d)}return b};
SpellSession.prototype.onResponse=function(a,b,c){if(c)this.listener.onError(c);else{if(this.protocol=="xml")b=this.parseResult(b.responseXML);this.setOrigWords(b,a.args.text);a.complete(b)}};
SpellSession.prototype.checkText=function(a,b){var c=this,d=this.params.lang,e=this.params.options;if(d=="en")e&=~Speller.LATIN_OPTIONS;else if((e&Speller.LATIN_OPTIONS)==0)d+=";en";this.listener.stateChanged(false);var f={complete:b,args:{lang:d,options:e,text:a},url:this.url+"/checkTexts",callback:function(g,i){c.onResponse(f,g,i)}};if(this.protocol=="json")json.sendQuery(f);else{f.method="POST";ajax.sendQuery(f)}};
SpellSession.prototype.setOrigWords=function(a,b){for(var c=0;c<a.length;++c)for(var d=b[c].split("\n"),e=a[c],f=0;f<e.length;++f){var g=e[f];g.origWord=d[g.row].substr(g.col,g.len)}};function TextDoc(a){this.ctrls=[];for(var b=0;b<a.length;++b)this.ctrls[b]=a[b];this.length=this.ctrls.length}
TextDoc.prototype.getTexts=function(a){var b=[],c=0,d=Speller.MAX_TEXT_LEN;a.startDoc=a.endDoc;a.startPos=a.endPos;for(var e=a.startDoc;e<this.ctrls.length;++e){for(var f="",g=0;;){f=this.ctrls[e].value.substr(a.endPos);g=f.length;if(c+g<=d)break;if(c>0)return b;g=0;for(var i=f.length,j=0;j<6;++j){var h="\n \t|,;".charAt(j);if(h=="|"){if(g>0)break}else{g=Math.max(g,(h+f).lastIndexOf(h,d));i=Math.min(i,(f+h).indexOf(h))}}if((g=g)>0)break;a.startPos=a.endPos+=i}a.endDoc=e;a.endPos+=g;if(g==0&&b.length==
0){a.startDoc=a.endDoc=e+1;a.startPos=a.endPos=0}else{b.push(f.substr(0,g));c+=g;if(g!=f.length)break;a.endDoc=e+1;a.endPos=0}}return b};TextDoc.prototype.select=function(a){var b=TextDoc.createRange(this.ctrls[a.docIndex]);if(!b.select(a))return null;return b};TextDoc.prototype.change=function(a,b){var c=this.select(a);if(!c)return false;c.setText(b);return true};
TextDoc.prototype.getHtmlFragment=function(a){var b=a.pos+a.text.length,c=this.ctrls[a.docIndex].value,d=c.lastIndexOf("\n",a.pos)+1,e=(c+"\n").indexOf("\n",b),f=c.substring(a.pos,b);a=c.substring(d,a.pos);b=c.substring(b,e);return util.htmlEncode(TextDoc.truncStr(a,70,-1))+"<WBR>"+util.htmlEncode(f).fontcolor("red").bold()+util.htmlEncode(TextDoc.truncStr(b,200))};TextDoc.createRange=function(a){if(a.createTextRange)return new TextRange(a);return new CtrlRange(a)};
TextDoc.truncStr=function(a,b,c){if(a.length<=b)return a;if(c&&c<0){b=a.lastIndexOf(" ",a.length-b);if(b>=0)a="..."+a.substr(b)}else{b=a.indexOf(" ",b);if(b>=0)a=a.substr(0,b+1)+"..."}return a};function TextRange(a){this.ctrl=a;this.r=null}
TextRange.prototype.select=function(a){for(var b=this.ctrl.createTextRange(),c=this.ctrl.value+"\n",d=0;d<a.pos;){var e=c.indexOf("\n",d);if(e>=a.pos)break;d=e-d;d>0&&c.substr(e-1,1)=="\r"&&--d;b.move("character",d);b.moveEnd("character",1);b.text=="\r"&&b.moveEnd("character",1);b.collapse(false);d=e+1}b.move("character",a.pos-d);b.moveEnd("character",a.text.length);if(b.text!=a.text)return false;b.select();this.r=b;return true};TextRange.prototype.setText=function(a){this.r.text=a};
function CtrlRange(a){this.ctrl=a}CtrlRange.prototype.select=function(a){if(this.ctrl.value.substr(a.pos,a.text.length)!=a.text)return false;this.pos=a.pos;this.len=a.text.length;return true};CtrlRange.prototype.setText=function(a){var b=this.ctrl.value;this.ctrl.value=b.substr(0,this.pos)+a+b.substr(this.pos+this.len)};
function SpellOptDialog(){this.args={lang:"ru",options:0};if(window.dialogArguments)this.args=window.dialogArguments;else if(window.opener&&window.opener.theDlgArgs)this.args=window.opener.theDlgArgs}SpellOptDialog.OPTIONS=[["ignoreUppercase",1,-1],["ignoreDigits",2,-1],["ignoreUrls",4,-1],["findRepeat",8,-1],["latin",16,0],["latin",128,1]];
SpellOptDialog.prototype.init=function(){var a=this;window.oncontextmenu=function(){return false};this.form=document.forms.form;this.form.userDic.onclick=function(){a.userDicDialog()};this.form.userDic.disabled=!util.localStorage();this.form.ok.onclick=function(){a.onOk();window.close()};this.form.cancel.onclick=function(){window.close()};this.form.langList.onchange=function(){a.updateUI()};for(var b=0;b<3;++b)this.form.latin[b].onclick=function(){a.updateUI();return true};this.initParams();this.setLang(this.params.lang);
this.setOptions(this.params.options);if(typeof this.args.recheck!="boolean"){document.getElementById("recheck").style.visibility="hidden";document.getElementById("labelRecheck").style.visibility="hidden"}};function s(a){return typeof a=="undefined"?"":a.toString()}SpellOptDialog.prototype.initParams=function(){var a=util.getCookies("yandex.spell"),b=this.args;this.params={};this.params.lang=b.lang||a.lang||b.defLang;this.params.options=parseInt(s(b.options)||s(a.options)||s(b.defOptions)||"0")};
SpellOptDialog.prototype.setOptions=function(a){this.form.latin[2].checked=true;for(var b=0;b<SpellOptDialog.OPTIONS.length;++b){var c=SpellOptDialog.OPTIONS[b],d=c[1],e=this.form[c[0]];if(c[2]>=0)e=e[c[2]];e.checked=(a&d)!=0}this.updateUI()};SpellOptDialog.prototype.setLang=function(a){util.selectItem(this.form.langList,a);this.updateUI()};
SpellOptDialog.prototype.getOptions=function(){for(var a=0,b=0;b<SpellOptDialog.OPTIONS.length;++b){var c=SpellOptDialog.OPTIONS[b],d=c[1],e=this.form[c[0]];if(c[2]>=0)e=e[c[2]];if(e.checked)a|=d}return a};SpellOptDialog.prototype.getLang=function(){var a=this.form.langList;if(a.selectedIndex<0)return"";return a.options[a.selectedIndex].value};SpellOptDialog.prototype.updateUI=function(){var a=this.getLang();this.enableGroup("groupLatin",a!="en");this.form.latinLang.disabled=a=="en"||!this.form.latin[2].checked};
SpellOptDialog.prototype.enableGroup=function(a,b){for(var c=document.getElementById(a),d=["INPUT","SELECT","LABEL"],e=0;e<d.length;++e)for(var f=c.getElementsByTagName(d[e]),g=0;g<f.length;++g)f[g].disabled=!b};SpellOptDialog.prototype.onOk=function(){this.args.lang=this.getLang();this.args.options=this.getOptions();this.args.recheck=this.form.recheck.checked;util.setCookies("yandex.spell",this.params)};
SpellOptDialog.prototype.userDicDialog=function(){util.modalDialog("userdic.html",this.args.userDicDlg,{})};function UserDicDialog(){this.userDic=new SpellDic("yandex.userdic");this.dicContent=this.userDic.getContent();this.closed=false}
UserDicDialog.prototype.init=function(){var a=this;this.form=document.forms.form;this.form.dic.value=this.dicContent;this.form.ok.onclick=function(){a.end(1);window.close()};window.onbeforeunload=function(){a.end(-1)};window.onunload=function(){a.end(-1)};window.oncontextmenu=function(){return false}};
UserDicDialog.prototype.end=function(a){if(!this.closed){var b=this.form.dic.value.replace(/\r/g,"");if(this.dicContent==b)a=0;if(a<0){a=document.getElementById("saveDic").innerHTML;a=window.confirm(a)?1:0}if(a){this.userDic.setContent(b);this.userDic.save()}this.closed=true}};
