(function(a){a.sceditor=function(I,u){var p=this;var v=a(I);var i=I;var K=null;var h=null;var E=null;var w=null;var b=null;var o=null;var z=false;var x=[];var C=null;var q=null;var c=[];var G,l,j,k,f,J,n,e,A,t,r,d,B,m,y,s,D,H,g,F;p.commands=a.sceditor.commands;G=function(){v.data("sceditor",p);p.options=a.extend({},a.sceditor.defaultOptions,u);if(p.options.locale!==null&&p.options.locale!=="en"){g()}if(p.options.height!==null){v.height(p.options.height)}if(p.options.width!==null){v.width(p.options.width)}if((p.options.height!==null&&p.options.height.toString().indexOf("%")>-1)||(p.options.width!==null&&p.options.width.toString().indexOf("%")>-1)){a(window).resize(s)}K=a('<div class="sceditor-container" />').width(v.outerWidth()).height(v.outerHeight());v.after(K);t();A();r();if(p.options.resizeEnabled){d()}v.parents("form").submit(p.updateTextareaValue);a(document).click(B);var L=v.hide().val();if(p.options.getTextHandler){L=p.options.getTextHandler(L)}p.setWysiwygEditorValue(L);m()};A=function(){b=a("<textarea></textarea>").hide();E=a('<iframe frameborder="0"></iframe>');if(window.location.protocol==="https:"){E.attr("src","javascript:false")}K.append(E).append(b);w=E[0];H(v.width());D(v.height());y().designMode="On";y().open();y().write('<html><head><link rel="stylesheet" type="text/css" href="'+p.options.style+'" /></head><body></body></html>');y().close();y().designMode="On";a(y()).find("body").keypress(n);a(y()).keypress(n);a(y()).mousedown(e);a(y()).bind("beforedeactivate keypress",J)};t=function(){var N=function(S){f(a(this),p.commands[a(this).data("sceditor-command")]);S.preventDefault()};h=a('<div class="sceditor-toolbar" />');var M=p.options.toolbar.split("|");for(var P=0;P<M.length;P++){var R=a('<div class="sceditor-group" />');var Q=M[P].split(",");for(var L=0;L<Q.length;L++){if(!p.commands.hasOwnProperty(Q[L])){continue}var O=a('<a class="sceditor-button sceditor-button-'+Q[L]+' " unselectable="on"><div unselectable="on" /></a>');if(p.commands[Q[L]].hasOwnProperty("tooltip")){O.attr("title",p._(p.commands[Q[L]].tooltip))}if(p.commands[Q[L]].exec){O.data("sceditor-wysiwygmode",true)}else{O.addClass("disabled")}if(p.commands[Q[L]].txtExec){O.data("sceditor-txtmode",true)}O.data("sceditor-command",Q[L]);O.click(N);R.append(O)}h.append(R)}if(p.options.toolbarContainer===null){K.append(h)}else{a(p.options.toolbarContainer).append(h)}};r=function(){a.each(p.commands,function(M,L){if(typeof L.keyPress!=="undefined"){x.push(L.keyPress)}})};H=function(L){K.width(L);E.width(L);E.width(L+(L-E.outerWidth(true)));b.width(L);b.width(L+(L-b.outerWidth(true)))};D=function(L){K.height(L);L=L-(p.options.toolbarContainer===null?h.outerHeight():0);E.height(L);E.height(L+(L-E.outerHeight(true)));b.height(L);b.height(L+(L-b.outerHeight(true)))};d=function(){var N=a('<div class="sceditor-grip" />'),Y=a('<div class="sceditor-resize-cover" />'),Q=0,O=0,P=0,W=0,V=K.width(),X=K.height(),T=false,U,S,L,R,M;U=(p.options.resizeMinHeight==null?X/2:p.options.resizeMinHeight);S=(p.options.resizeMaxHeight==null?X*2:p.options.resizeMaxHeight);L=(p.options.resizeMinWidth==null?V/2:p.options.resizeMinWidth);R=(p.options.resizeMaxWidth==null?V*2:p.options.resizeMaxWidth);M=function(ab){var Z=W+(ab.pageY-O);var aa=P+(ab.pageX-Q);if(aa>=L&&(R<0||aa<=R)){H(aa)}if(Z>=U&&(S<0||Z<=S)){D(Z)}ab.preventDefault()};K.append(N);K.append(Y.hide());N.mousedown(function(Z){Q=Z.pageX;O=Z.pageY;P=K.width();W=K.height();T=true;Y.show();a(document).bind("mousemove",M);Z.preventDefault()});a(document).mouseup(function(Z){if(!T){return}T=false;Y.hide();a(document).unbind("mousemove",M);Z.preventDefault()})};m=function(){var L=a.extend({},p.options.emoticons.more,p.options.emoticons.dropdown,p.options.emoticons.hidden);a.each(L,function(O,M){var N=document.createElement("img");N.src=M;c.push(N)})};p.createDropDown=function(L,O,N,M){p.closeDropDown();if(M!==false){N=a(N);N.find(":not(input,textarea)").filter(function(){return this.nodeType===1}).attr("unselectable","on")}o=a('<div class="sceditor-dropdown sceditor-'+O+'" />').css({top:L.offset().top,left:L.offset().left}).append(N);o.appendTo(a("body"));z=true;o.click(function(P){P.stopPropagation()})};B=function(L){if(!z&&L.which!==3){p.closeDropDown()}z=false};p.closeDropDown=function(L){if(o!==null){o.remove();o=null}if(L===true){p.focus()}};y=function(){if(w.contentDocument){return w.contentDocument}if(w.contentWindow&&w.contentWindow.document){return w.contentWindow.document}if(w.document){return w.document}return null};p.wysiwygEditorInsertHtml=function(M,O){p.focus();if(a(l()).is("code")||a(l()).parents("code").length!==0){return}if(typeof O!=="undefined"){M=M+p.getWysiwygSelectedHtml()+O}if(y().getSelection){var L=j();var N=y().createElement("div");N.innerHTML=M;N=N.children[0];L.deleteContents();L.insertNode(N);L=L.cloneRange();if(N.parentNode!==L.startContainer||!a.browser.opera){L.setStartAfter(N)}else{return}w.contentWindow.getSelection().removeAllRanges();w.contentWindow.getSelection().addRange(L)}else{if(y().selection&&y().selection.createRange){y().selection.createRange().pasteHTML(M)}else{p.execCommand("insertHtml",M)}}C=null};p.wysiwygEditorInsertText=function(L){L=L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />");p.wysiwygEditorInsertHtml("<span>"+L+"</span>")};j=function(){var L;if(w.contentWindow&&w.contentWindow.getSelection){L=w.contentWindow.getSelection()}else{if(y().selection){L=y().selection}}if(L.getRangeAt&&L.rangeCount<=0){L.addRange(y().createRange())}if(L.getRangeAt){return L.getRangeAt(0)}else{if(L.createRange){return L.createRange()}}return null};p.getWysiwygSelectedHtml=function(){var M=j();if(M===null){return""}if(document.selection&&document.selection.createRange){if(M.text===""){return""}if(typeof M.htmlText!=="undefined"){return M.htmlText}}if(window.XMLSerializer){var L="";a(M.cloneContents().childNodes).each(function(){L+=new XMLSerializer().serializeToString(this)});return L}};l=function(){var L=j();if(L===null){return null}if(window.getSelection&&typeof L.commonAncestorContainer!=="undefined"){return L.commonAncestorContainer}if(document.selection&&document.selection.createRange){return L.parentElement()}};p.getWysiwygEditorValue=function(M){var L=E.contents().find("body").html();if(M!==false&&p.options.getHtmlHandler){L=p.options.getHtmlHandler(L,E.contents().find("body"))}return L};p.getTextareaValue=function(L){var M=b.val();if(L!==false&&p.options.getTextHandler){M=p.options.getTextHandler(M)}return M};p.setWysiwygEditorValue=function(L){y().body.innerHTML=k(L)};p.setTextareaValue=function(L){b.val(L)};p.updateTextareaValue=function(){if(F()){v.val(p.getTextareaValue(false))}else{v.val(p.getWysiwygEditorValue())}};k=function(L){var M=a.extend({},p.options.emoticons.more,p.options.emoticons.dropdown,p.options.emoticons.hidden);a.each(M,function(O,N){var P=p.regexEscape(O)+"(?=([^\\<\\>]*?<(?!/code)|[^\\<\\>]*?$))";var Q="";if(p.options.emoticonsCompat){P="((>|^|\\s){1})"+P+"(?=(\\s|$|<){1})";Q="$1"}L=L.replace(new RegExp(P,"gm"),Q+'<img src="'+N+'" data-sceditor-emoticon="'+O+'" />')});return L};p.regexEscape=function(L){return L.replace(/[\$\?\[\]\.\*\(\)\|]/g,"\\$&").replace("<","&lt;").replace(">","&gt;")};F=function(){return b.is(":visible")};p.toggleTextMode=function(){if(F()){p.setWysiwygEditorValue(p.getTextareaValue())}else{p.setTextareaValue(p.getWysiwygEditorValue())}h.find(".sceditor-button").removeClass("disabled");C=null;b.toggle();E.toggle();h.find(".sceditor-button").each(function(){var L=a(this);if(F()&&!L.data("sceditor-txtmode")){L.addClass("disabled")}else{if(!F()&&!L.data("sceditor-wysiwygmode")){L.addClass("disabled")}}})};f=function(L,M){if(F()){if(M.hasOwnProperty("txtExec")){M.txtExec.call(p,L)}return}if(!M.hasOwnProperty("exec")){return}if(a.isFunction(M.exec)){M.exec.call(p,L)}else{p.execCommand(M.exec,M.hasOwnProperty("execParam")?M.execParam:null)}};p.focus=function(){w.contentWindow.focus();if(C!==null){if(window.document.createRange){window.getSelection().addRange(C)}else{if(window.document.selection){C.select()}}}};J=function(){if(!a.browser.msie){return}C=j()};p.execCommand=function(O,N){var L=false;p.focus();if(a(l()).is("code")||a(l()).parents("code").length!==0){return}if(y()){try{L=y().execCommand(O,false,N)}catch(M){}}if(!L&&typeof p.commands[O]!=="undefined"&&typeof p.commands[O].errorMessage!=="undefined"){alert(p._(p.commands[O].errorMessage))}};n=function(M){p.closeDropDown();if(a(l()).is("code")||a(l()).parents("code").length!==0){return}var L=x.length;while(L--){x[L].call(p,M,w,b)}};e=function(L){p.closeDropDown()};s=function(){if(p.options.height!==null&&p.options.height.toString().indexOf("%")>-1){D(K.parent().height()*(parseFloat(p.options.height)/100))}if(p.options.width!==null&&p.options.width.toString().indexOf("%")>-1){H(K.parent().width()*(parseFloat(p.options.width)/100))}};p._=function(){var L=arguments;if(q!==null&&q[L[0]]){L[0]=q[L[0]]}return L[0].replace(/\{(\d+)\}/g,function(N,M){return typeof L[M-0+1]!="undefined"?L[M-0+1]:"{"+M+"}"})};g=function(){if(a.sceditor.locale[p.options.locale]){q=a.sceditor.locale[p.options.locale]}else{var L=p.options.locale.split("-");if(a.sceditor.locale[L[0]]){q=a.sceditor.locale[L[0]]}}if(q!==null&&q.dateFormat){p.options.dateFormat=q.dateFormat}};G()};a.sceditor.locale={};a.sceditor.commands={bold:{exec:"bold",tooltip:"Bold"},italic:{exec:"italic",tooltip:"Italic"},underline:{exec:"underline",tooltip:"Underline"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{exec:function(c){var e=this;var g=e.options.fonts.split(",");var f=a("<div />");var b=function(h){e.execCommand("fontname",a(this).data("sceditor-font"));e.closeDropDown(true);h.preventDefault()};for(var d=0;d<g.length;d++){f.append(a('<a class="sceditor-font-option" href="#"><font face="'+g[d]+'">'+g[d]+"</font></a>").data("sceditor-font",g[d]).click(b))}e.createDropDown(c,"font-picker",f)},tooltip:"Font Name"},size:{exec:function(c){var e=this;var f=a("<div />");var b=function(g){e.execCommand("fontsize",a(this).data("sceditor-fontsize"));e.closeDropDown(true);g.preventDefault()};for(var d=1;d<=7;d++){f.append(a('<a class="sceditor-fontsize-option" href="#"><font size="'+d+'">'+d+"</font></a>").data("sceditor-fontsize",d).click(b))}e.createDropDown(c,"fontsize-picker",f)},tooltip:"Font Size"},color:{exec:function(d){var j=this;var c={r:255,g:255,b:255};var k=a("<div />");var g=this.options.colors?this.options.colors.split("|"):new Array(21);var h=[];var m=0;for(var f=0;f<g.length;++f){var b=(typeof g[f]!=="undefined")?g[f].split(","):new Array(21);h[m++]='<div class="sceditor-color-column">';for(var l=0;l<b.length;++l){var e=(typeof b[l]!=="undefined")?b[l]:"#"+c.r.toString(16)+c.g.toString(16)+c.b.toString(16);h[m++]='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>';if(l%5===0){c={r:c.r,g:c.g-51,b:255}}else{c={r:c.r,g:c.g,b:c.b-51}}}h[m++]="</div>";if(f%5===0){c={r:c.r-51,g:255,b:255}}else{c={r:c.r,g:255,b:255}}}k.append(h.join("")).find("a").click(function(i){j.execCommand("forecolor",a(this).attr("data-color"));j.closeDropDown(true);i.preventDefault()});j.createDropDown(d,"color-picker",k)},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(b){var c=this;var d=a(this._('<form><div><label for="txt">{0}</label> <textarea cols="20" rows="7" id="txt"></textarea></div></form>',this._("Paste your text inside the following box:"))).submit(function(){return false});d.append(a(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(f){c.wysiwygEditorInsertText(a(this).parent("form").find("#txt").val());c.closeDropDown(true);f.preventDefault()}));c.createDropDown(b,"pastetext",d)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},undo:{exec:"undo",tooltip:"Undo"},redo:{exec:"redo",tooltip:"Redo"},table:{exec:function(b){var c=this;var d=a(this._('<form><div><label for="rows">{0}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{1}</label><input type="text" id="cols" value="2" /></div></form>',this._("Rows:"),this._("Cols:"))).submit(function(){return false});d.append(a(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(j){var h=a(this).parent("form").find("#rows").val()-0;var i=a(this).parent("form").find("#cols").val()-0;if(h<1||i<1){return}var g="<table>";for(var k=0;k<h;k++){g+="<tr>";for(var f=0;f<i;f++){if(a.browser.msie){g+="<td></td>"}else{g+='<td><br class="sceditor-ignore" /></td>'}}g+="</tr>"}g+="</table>";c.wysiwygEditorInsertHtml(g);c.closeDropDown(true);j.preventDefault()}));c.createDropDown(b,"inserttable",d)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(b){var c=this;var d=a(this._('<form><div><label for="link">{0}</label> <input type="text" id="image" value="http://" /></div><div><label for="width">{1}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{2}</label> <input type="text" id="height" size="2" /></div></form>',this._("URL:"),this._("Width (optional):"),this._("Height (optional):"))).submit(function(){return false});d.append(a(this._('<div><input type="button" class="button" value="Insert" /></div>',this._("Insert"))).click(function(j){var g=a(this).parent("form");var k=g.find("#image").val();var h="";var i,f;if((i=g.find("#width").val())!==""){h+=' width="'+i+'"'}if((f=g.find("#height").val())!==""){h+=' height="'+f+'"'}if(k!==""&&k!=="http://"){c.wysiwygEditorInsertHtml("<img"+h+' src="'+k+'" />')}c.closeDropDown(true);j.preventDefault()}));c.createDropDown(b,"insertimage",d)},tooltip:"Insert an image"},email:{exec:function(b){var c=this;var d=a(this._('<form><div><label for="email">{0}</label> <input type="text" id="email" value="" /></div></form>',this._("E-mail:"))).submit(function(){return false});d.append(a('<div><input type="button" class="button" value="Insert" /></div>').click(function(f){var g=a(this).parent("form").find("#email").val();if(g!==""){c.focus();if(c.getWysiwygSelectedHtml()==""){c.wysiwygEditorInsertHtml('<a href="mailto:'+g+'">'+g+"</a>")}else{c.execCommand("createlink","mailto:"+g)}}c.closeDropDown(true);f.preventDefault()}));c.createDropDown(b,"insertemail",d)},tooltip:"Insert an email"},link:{exec:function(b){var c=this;var d=a(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div></form>',this._("URL:"))).submit(function(){return false});d.append(a(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(f){var g=a(this).parent("form").find("#link").val();if(g!==""&&g!=="http://"){c.focus();if(c.getWysiwygSelectedHtml()==""){c.wysiwygEditorInsertHtml('<a href="'+g+'">'+g+"</a>")}else{c.execCommand("createlink",g)}}c.closeDropDown(true);f.preventDefault()}));c.createDropDown(b,"insertlink",d)},tooltip:"Insert a link"},unlink:{exec:"unlink",tooltip:"Unlink"},quote:{exec:function(b,c){c=c||"<br />";this.wysiwygEditorInsertHtml("<blockquote>"+c+"</blockquote>")},tooltip:"Insert a Quote"},emoticon:{exec:function(d){var f=this;var g=a("<div />");var b=a("<div />");var c=function(i,h){b.append(a("<img />").attr({src:h,alt:i}).click(function(l){var m,j;if(f.options.emoticonsCompat){m="<span> ";j=" </span>"}var k=f.options.emoticonsCompat?" ":"";f.wysiwygEditorInsertHtml(m+'<img src="'+a(this).attr("src")+'" data-sceditor-emoticon="'+a(this).attr("alt")+'" />'+j);f.closeDropDown(true);l.preventDefault()}));if(b.children().length>3){g.append(b);b=a("<div />")}};a.each(f.options.emoticons.dropdown,c);if(b.children().length>0){g.append(b)}if(typeof f.options.emoticons.more!=="undefined"){var e=a(this._('<a class="sceditor-more">{0}</a>',this._("More"))).click(function(){var h=a.extend({},f.options.emoticons.dropdown,f.options.emoticons.more);g=a("<div />");b=a("<div />");a.each(h,c);if(b.children().length>0){g.append(b)}f.createDropDown(d,"insertemoticon",g)});g.append(e)}f.createDropDown(d,"insertemoticon",g)},keyPress:function(j,c){var h=null,d=-1,i=this;if(c.contentWindow&&c.contentWindow.getSelection){h=c.contentWindow.getSelection().getRangeAt(0)}if(h==null||!h.startContainer){return}if(!i.allEmoticonCache){i.allEmoticonCache=a.extend({},i.options.emoticons.more,i.options.emoticons.dropdown,i.options.emoticons.hidden)}if(!i.longestEmoticonCode){i.longestEmoticonCode=0;a.each(i.allEmoticonCache,function(m,e){if(m.length>i.longestEmoticonCode){i.longestEmoticonCode=m.length}});if(i.options.emoticonsCompat){i.longestEmoticonCode+=1}}var l=String.fromCharCode(j.which);var f=i.options.emoticonsCompat?/\s/.test(l):false;var g=h.startContainer.textContent.substr(0,h.startOffset);var k=h.startContainer.textContent.substr(h.startOffset,i.longestEmoticonCode);var b=g+l+k;a.each(i.allEmoticonCache,function(m,e){if((d=b.indexOf(m,h.startOffset-m.length))>-1){if(i.options.emoticonsCompat){var n=new RegExp("(\\s{1})"+i.regexEscape(m)+"(?=\\s{1})","gm");if(f&&(l+k).indexOf(m)>-1){return}if(!n.test(b)){return}}h=h.cloneRange();h.setStart(h.startContainer,d);h.setEnd(h.startContainer,d+m.length-(f?0:1));h.deleteContents();var o=c.contentDocument.createElement("div");o.innerHTML='<img src="'+e+'" data-sceditor-emoticon="'+m+'" />';o=o.children[0];h.insertNode(o);h=h.cloneRange();h.setStartAfter(o);c.contentWindow.getSelection().removeAllRanges();c.contentWindow.getSelection().addRange(h);if(!f){j.preventDefault();j.stopPropagation()}return false}})},tooltip:"Insert an emoticon"},youtube:{exec:function(b){var c=this;var d=a(this._('<form><div><label for="link">{0}</label> <input type="text" id="link" value="http://" /></div></form>',this._("Video URL:"))).submit(function(){return false});d.append(a(this._('<div><input type="button" class="button" value="{0}" /></div>',this._("Insert"))).click(function(f){var g=a(this).parent("form").find("#link").val();if(g!==""&&g!=="http://"){g=g.replace(/^[^v]+v.(.{11}).*/,"$1");c.wysiwygEditorInsertHtml('<iframe width="560" height="315" src="http://www.youtube.com/embed/'+g+'?wmode=opaque" data-youtube-id="'+g+'" frameborder="0" allowfullscreen></iframe>')}c.closeDropDown(true);f.preventDefault()}));c.createDropDown(b,"insertlink",d)},tooltip:"Insert a YouTube video"},date:{exec:function(){var c=new Date();var d=c.getYear();var e=c.getMonth()+1;var b=c.getDate();if(d<2000){d=1900+d}if(e<10){e="0"+e}if(b<10){b="0"+b}this.wysiwygEditorInsertHtml("<span>"+this.options.dateFormat.replace(/year/i,d).replace(/month/i,e).replace(/day/i,b)+"</span>")},tooltip:"Insert current date"},time:{exec:function(){var c=new Date();var b=c.getHours();var e=c.getMinutes();var d=c.getSeconds();if(b<10){b="0"+b}if(e<10){e="0"+e}if(d<10){d="0"+d}this.wysiwygEditorInsertHtml("<span>"+b+":"+e+":"+d+"</span>")},tooltip:"Insert current time"},print:{exec:"print",tooltip:"Print"},source:{exec:function(){this.toggleTextMode()},txtExec:function(){this.toggleTextMode()},tooltip:"View source"}};a.sceditor.commandExists=function(b){return typeof a.sceditor.commands[b]!=="undefined"};a.sceditor.setCommand=function(d,b,e,c){if(!d||!b){return false}if(!a.sceditor.commandExists(d)){a.sceditor.commands[d]={}}a.sceditor.commands[d].exec=b;if(e){a.sceditor.commands[d].tooltip=e}if(c){a.sceditor.commands[d].keyPress=c}return true};a.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|undo,redo|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|print,source",style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:"en",emoticonsCompat:false,emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:true,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,getHtmlHandler:null,getTextHandler:null,dateFormat:"year-month-day",toolbarContainer:null};a.fn.sceditor=function(b){return this.each(function(){(new a.sceditor(this,b))})}})(jQuery);(function(a){a.sceditorBBCodePlugin=function(e,l){var c=this;var k,f,g,h,d,j;c.bbcodes=a.sceditorBBCodePlugin.bbcodes;var i={};var b={};k=function(){c.options=a.extend({},a.sceditor.defaultOptions,a.sceditorBBCodePlugin.defaultOptions,l);f();(new a.sceditor(e,a.extend({},c.options,{getHtmlHandler:c.getHtmlHandler,getTextHandler:c.getTextHandler})))};f=function(){a.each(c.bbcodes,function(m,n){if(typeof c.bbcodes[m].tags!=="undefined"){a.each(c.bbcodes[m].tags,function(o,p){i[o]=(i[o]||{});i[o][m]=p})}if(typeof c.bbcodes[m].styles!=="undefined"){a.each(c.bbcodes[m].styles,function(p,o){b[p]=(b[p]||{});b[p][m]=o})}})};g=function(n,o){var m;a.each(b,function(q,p){if(n.get(0).nodeName.toLowerCase()==="a"&&(q==="color"||q==="text-decoration")){return}else{if(n.get(0).nodeName.toLowerCase()==="code"&&(q==="font-family")){return}}m=n.css(q);if(n.parent().css(q)==m){return}a.each(p,function(s,r){if(r===null||a.inArray(m.toString(),r)>-1){if(a.isFunction(c.bbcodes[s].format)){o=c.bbcodes[s].format.call(c,n,o)}else{o=d(c.bbcodes[s].format,o)}}})});return o};h=function(n,o){var m=n.get(0).nodeName.toLowerCase();if(n.hasClass("sceditor-ignore")){return o}if(typeof i[m]!=="undefined"){a.each(i[m],function(q,r){if(r!==null){var p=false;a.each(r,function(t,s){if(typeof n.attr(t)==="undefined"){return}if(s!==null&&a.inArray(n.attr(t),s)<0){return}p=true;return false});if(!p){return}}if(a.isFunction(c.bbcodes[q].format)){o=c.bbcodes[q].format.call(c,n,o)}else{o=d(c.bbcodes[q].format,o)}})}if(m==="br"||m==="div"||m==="p"){o+="\n"}return o};d=function(){var m=arguments;return m[0].replace(/\{(\d+)\}/g,function(o,n){return typeof m[n-0+1]!="undefined"?m[n-0+1]:"{"+n+"}"})};c.stripQuotes=function(m){return m.replace(/^["']+/,"").replace(/["']+$/,"")};c.getHtmlHandler=function(m,n){return c.elementToBbcode(a(n))};c.elementToBbcode=function(n){var m="";if(typeof n.get(0)==="undefined"){return""}if(n.get(0).nodeName.toLowerCase()!=="iframe"){if(n.get(0).nodeType===3){return n.get(0).nodeValue}else{if(n.is("code")){m=j(n)}else{if(n.contents().length>0){a.each(n.contents(),function(){m+=c.elementToBbcode(a(this))})}}}}if(!n.is("code")){m=g(n,m)}m=h(n,m);return m};j=function(n){var m="";if(typeof n.get(0)==="undefined"){return""}if(n.get(0).nodeType===3){return n.get(0).nodeValue}else{if(n.is("br")){m="\n"}else{if(n.contents().length>0){a.each(n.contents(),function(){m+=j(a(this))})}}}return m};c.getTextHandler=function(q){var p=/\[([^\[\s=]*?)(?:([^\[]*?))?\]((?:[\s\S(?!=\[\\\1)](?!\[\1))*?)\[\/(\1)\]/g;var n=/(\S+)=((?:(?:(["'])(?:\\\3|[^\3])*?\3))|(?:[^'"\s]+))/g;var m;var o=function(w,s,r,u){var t={};if(typeof r!=="undefined"){var v;r=a.trim(r);if((r.charAt(0)=="="&&(r.split("=").length-1)<=1)||s==="url"){t.defaultAttr=c.stripQuotes(r.substr(1))}else{if(r.charAt(0)==="="){r="defaultAttr"+r}while((v=n.exec(r))){t[v[1].toLowerCase()]=c.stripQuotes(v[2])}}}if(typeof c.bbcodes[s]==="undefined"){return w}if(typeof c.bbcodes[s].html==="function"){return c.bbcodes[s].html.call(c,s,t,u)}else{return d(c.bbcodes[s].html,u)}};q=q.replace(/&/g,"&amp;");q=q.replace(/</g,"&lt;");q=q.replace(/>/g,"&gt;");q=q.replace(/\r/g,"");q=q.replace(/(\[\/?(?:left|center|right|justify)\])\n/g,"$1");q=q.replace(/\n/g,"<span><br /></span>");while(q!==m){m=q;q=q.replace(p,o)}q=q.replace(/\[hr\]/gi,"<hr>");return q.replace(/ {2}(?=([^<\>]*?<|[^<\>]*?$))/g," &nbsp;")};k()};a.sceditorBBCodePlugin.bbcodes={b:{styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},left:{styles:{"text-align":["left"]},format:"[left]{0}[/left]",html:'<div style="text-align: left">{0}</div>'},center:{styles:{"text-align":["center"]},format:"[center]{0}[/center]",html:'<div style="text-align: center">{0}</div>'},right:{styles:{"text-align":["right"]},format:"[right]{0}[/right]",html:'<div style="text-align: right">{0}</div>'},justify:{styles:{"text-align":["justify"]},format:"[justify]{0}[/justify]",html:'<div style="text-align: justify">{0}</div>'},font:{styles:{"font-family":null},format:function(b,c){if(b.css("font-family")==this.options.defaultFont){return c}return"[font="+this.stripQuotes(b.css("font-family"))+"]"+c+"[/font]"},html:function(c,b,d){return'<font face="'+b.defaultAttr+'">'+d+"</font>"}},size:{styles:{"font-size":null},format:function(c,d){var e=c.css("fontSize");var b=1;if(e==this.options.defaultSize){return d}if(e.indexOf("px")>-1){e=e.replace("px","")-0;if(e>12){b=2}if(e>15){b=3}if(e>17){b=4}if(e>23){b=5}if(e>31){b=6}if(e>47){b=7}}else{b=e}return"[size="+b+"]"+d+"[/size]"},html:function(c,b,d){return'<font size="'+b.defaultAttr+'">'+d+"</font>"}},color:{styles:{color:null},format:function(c,e){var d=function(h){var g;function f(i){i=parseInt(i,10);if(isNaN(i)){return"00"}i=Math.max(0,Math.min(i,255)).toString(16);return i.length<2?"0"+i:i}if((g=h.match(/rgb\((\d+),\s*?(\d+),\s*?(\d+)\)/i))){return"#"+f(g[1])+f(g[2]-0)+f(g[3]-0)}return h};var b=d(c.css("color"));if(b==this.options.defaultColor){return e}return"[color="+b+"]"+e+"[/color]"},html:function(c,b,d){return'<font color="'+b.defaultAttr+'">'+d+"</font>"}},ul:{tags:{ul:null},format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{html:"<ul>{0}</ul>"},ol:{tags:{ol:null},format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{html:"<li>{0}</li>"},table:{tags:{table:null},format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},format:"[td]{0}[/td]",html:'<td>{0}<br class="sceditor-ignore" /></td>'},emoticon:{tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(b,c){return b.attr("data-sceditor-emoticon")+c},html:"{0}"},horizontalrule:{tags:{hr:null},format:"[hr]{0}",html:"<hr />"},img:{tags:{img:{src:null}},format:function(b,c){if(typeof b.attr("data-sceditor-emoticon")!="undefined"){return c}var d="="+a(b).width()+"x"+a(b).height();return"[img"+d+"]"+b.attr("src")+"[/img]"},html:function(c,b,d){var f="";if(typeof b.width!="undefined"){f+=' width="'+b.width+'"'}if(typeof b.height!="undefined"){f+=' height="'+b.height+'"'}if(typeof b.defaultAttr!=="undefined"){var e=b.defaultAttr.split(/x/i);f=' width="'+e[0]+'" height="'+(e.length===2?e[1]:e[0])+'"'}return"<img "+f+' src="'+d+'" />'}},url:{tags:{a:{href:null}},format:function(b,c){if(b.attr("href").substr(0,7)=="mailto:"){return"[email="+b.attr("href").substr(7)+"]"+c+"[/email]"}return"[url="+decodeURI(b.attr("href"))+"]"+c+"[/url]"},html:function(c,b,d){if(typeof b.defaultAttr==="undefined"||b.defaultAttr.length==0){b.defaultAttr=d}return'<a href="'+encodeURI(b.defaultAttr)+'">'+d+"</a>"}},email:{html:function(c,b,d){if(typeof b.defaultAttr==="undefined"){b.defaultAttr=d}return'<a href="mailto:'+b.defaultAttr+'">'+d+"</a>"}},quote:{tags:{blockquote:null},format:function(c,e){var b="",d=this;if(a(c).children("cite:first").length==1){b="="+a(c).children("cite:first").text();e="";a(c).children("cite:first").remove();a(c).contents().each(function(){e+=d.elementToBbcode(a(this))})}return"[quote"+b+"]"+e+"[/quote]"},html:function(c,b,d){if(typeof b.defaultAttr!=="undefined"){d="<cite>"+b.defaultAttr+"</cite>"+d}return"<blockquote>"+d+"</blockquote>"}},code:{tags:{code:null},format:"[code]{0}[/code]",html:"<code>{0}</code>"},youtube:{tags:{iframe:{"data-youtube-id":null}},format:function(b,c){if(!b.attr("data-youtube-id")){return c}return"[youtube]"+b.attr("data-youtube-id")+"[/youtube]"},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'}};a.sceditorBBCodePlugin.commandExists=function(b){return typeof a.sceditorBBCodePlugin.bbcodes[b]!=="undefined"};a.sceditorBBCodePlugin.setCommand=function(c,b,e,f,d){if(!c||!f||!d){return false}if(!a.sceditorBBCodePlugin.commandExists(c)){a.sceditorBBCodePlugin.bbcodes[c]={}}a.sceditorBBCodePlugin.bbcodes[c].format=f;a.sceditorBBCodePlugin.bbcodes[c].html=d;if(b){a.sceditorBBCodePlugin.bbcodes[c].tags=b}if(e){a.sceditorBBCodePlugin.bbcodes[c].styles=e}return true};a.sceditorBBCodePlugin.defaultOptions={defaultSize:13,defaultColor:"#111111",defaultFont:"Verdana, Arial, Helvetica, sans-serif"};a.fn.sceditorBBCodePlugin=function(b){return this.each(function(){(new a.sceditorBBCodePlugin(this,b))})}})(jQuery);